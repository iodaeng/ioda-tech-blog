---
title: A New Test Post
author: Ramesh Sen

--- name:content pipeline:markdown

Here's something with more text to get a better idea of how this might look in normal usage. 

##### Let's see how something with formatting looks

I'm going to fill this up a little bit more.

What if I *do this*? Or _this_?

Does this render as scala code?
{pygmentize:: scala}
package fm.ioda.blog

import org.fusesource.scalate._
import org.fusesource.scalate.page._
import org.fusesource.scalate.util.IOUtil._
import java.io.File

object Util {
  /**
   * Returns the blog posts from the current request's directory by default sorted in date order
   */
  def posts: List[Page] = {
    val context = RenderContext()

    val base = context.requestUri.replaceFirst("""/?[^/]+$""", "")
    val dir = context.engine.resourceLoader.resource("/index.page").flatMap(_.toFile).getOrElse(throw new Exception("index page not found.")).getParentFile

    println("Using dir: "+dir+" at request path: "+base)

    val index = new File(dir, "index.page")
    dir.descendants.filter(f => f != index && !f.isDirectory && f.name.endsWith(".page")).map { file =>
      val page = PageFilter.parse(context, file)
      page.link = file.relativeUri(dir).stripSuffix(".page") + ".html"
      page
    }.toList.sortBy(_.createdAt.getTime * -1)
  }

}
{pygmentize}
